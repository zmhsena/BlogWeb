<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的个人笔记博客</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    <nav>
        <div class="logo">MyNotes</div>
        <ul>
            <li><a href="index.html">首页</a></li>
            <li><a href="admin.html" class="admin-link">管理后台</a></li>
            <li><a href="#">分类</a></li>
        </ul>
    </nav>
</header>

<main class="container">
    <section id="post-list">
    </section>

    <aside>
        <div class="card">
            <h3>关于我</h3>
            <p>热爱记录，热爱生活。这是我的技术笔记与思考。</p>
        </div>
        <div class="card">
            <h3>热门标签</h3>
            <div class="tags">
                <span>#C#</span> <span>#数据结构</span> <span>#算法</span><span>#面经</span>
            </div>
        </div>
    </aside>
</main>

<script>
    // 1. 定义数据加载函数
    function bootstrapBlog() {
        const dataScript = document.createElement('script');
        // 添加时间戳，彻底干掉缓存
        dataScript.src = 'data.js?v=' + Date.now();

        // 2. 关键：监听 data.js 加载完成事件
        dataScript.onload = function() {
            console.log("数据同步完成，正在启动渲染...");

            // 3. 数据到位后，再动态加载主逻辑 script.js
            const mainScript = document.createElement('script');
            mainScript.src = 'script.js';
            document.body.appendChild(mainScript);
        };

        dataScript.onerror = function() {
            document.getElementById('post-list').innerHTML = "<p>数据文件加载失败，请检查 data.js 是否存在。</p>";
        };

        document.head.appendChild(dataScript);
    }

    // 执行启动逻辑
    bootstrapBlog();
</script>
</body>
</html>