<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>文章详情 - MyNotes</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
<header>
    <nav><div class="logo">MyNotes</div><ul><li><a href="index.html">返回首页</a></li></ul></nav>
</header>

<main class="container" style="display: block; max-width: 850px;">
    <article class="post-card">
        <h1 id="detail-title">正在加载...</h1>
        <div class="post-meta" id="detail-meta"></div>
        <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
        <div id="detail-content"></div>
    </article>
</main>

<script>
    // 强制刷新缓存读取数据
    document.write('<script src="data.js?v=' + Date.now() + '"><\/script>');
</script>
<script>
    window.onload = function() {
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');
        const post = window.blogPosts && window.blogPosts[id];

        if (!post) {
            document.getElementById('detail-title').innerText = "文章不存在";
            return;
        }

        document.title = post.title;
        document.getElementById('detail-title').innerText = post.title;
        document.getElementById('detail-meta').innerText = `${post.date} | ${post.category}`;

        // 配置 Marked 并渲染
        marked.setOptions({ breaks: true, gfm: true });
        document.getElementById('detail-content').innerHTML = marked.parse(post.fullContent);

        // 执行代码高亮
        hljs.highlightAll();
    };
</script>
</body>
</html>